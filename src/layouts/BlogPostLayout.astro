---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Navbar from '../components/Navbar.astro';
import Link from '../components/Link.astro';
import Newsletter from '../components/Newsletter.astro';

type Props = CollectionEntry<'blog'>['data'];

const {
  title,
  description,
  pubDate,
  updatedDate,
  heroImage,
  heroImageAltText,
  tags,
} = Astro.props;
---

<html lang="en">
  <head>
    <BaseHead title={title} description={description} />
  </head>

  <body>
    <div class="container mx-auto max-w-screen-xl px-4 py-8">
      <header>
        <Navbar />
      </header>
      <main class="pb-12">
        <article class="prose prose-zinc mx-auto">
          <header id="article-header" class="pt-16 md:pt-24 lg:pt-28 xl:pt-32">
            <Link
              href="/blog"
              class="flex justify-self-start !no-underline text-foreground-muted hover:text-foreground group transition-all duration-300"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-arrow-left size-5 group-hover:opacity-100 md:opacity-0 transition-all duration-300 md:-translate-x-7 group-hover:translate-x-0"
                ><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg
              ><span
                class="md:-translate-x-7 group-hover:translate-x-0 transition-all duration-300"
                >view all writing</span
              ></Link
            >
            <div>
              {
                heroImage && (
                  <img
                    class="aspect-video rounded-lg object-cover"
                    src={heroImage}
                    alt={heroImageAltText}
                  />
                )
              }
            </div>
            <div>
              <div>
                <div>
                  <FormattedDate date={pubDate} />
                  {
                    updatedDate && (
                      <span>
                        Last updated on <FormattedDate date={updatedDate} />
                      </span>
                    )
                  }
                </div>
                <h1>{title}</h1>
              </div>
            </div>
            <slot />
          </header>
        </article>
      </main>
      <Newsletter />
      <Footer />
    </div>
  </body>
</html>
